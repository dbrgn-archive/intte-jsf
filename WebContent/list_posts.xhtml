<ui:composition template="template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
        >
    <ui:define name="content">

        <div class="row">

            <ui:repeat var="post" value="#{postsBean.posts}" styleClass="posts">

                <div class="post">
                    <h:form>
                        <div class="voteContainer">
                            <h:commandLink action="#{post.voteUp}">
                                <f:ajax event="action" render="rating"/>
                                <div class="voteButton up"><span>upvote</span></div>
                            </h:commandLink>
                            <div class="postScore text-center"><span><h:outputText id="rating" value="#{post.rating}"/></span></div>
                            <h:commandLink action="#{post.voteDown}">
                                <f:ajax event="action" render="rating"/>
                                <div class="voteButton down"><span>downvote</span></div>
                            </h:commandLink>
                        </div>
                        <div class="postContainer">
                            <h:commandLink styleClass="postLink" action="#{postBean.setPost(post)}">
                                <h2 class="postTitle">#{post.title}</h2>

                                <div class="postInfo">
                                    <span class="postTime">#{post.durationSinceCreated.value} #{post.durationSinceCreated.unit} #{i18n.ago} </span> #{i18n.by}
                                    <span class="postUser">#{post.user.username}</span>
                                </div>
                                <p class="comments"><span class="glyphicon glyphicon-comment"/>
                                    <span>#{post.deepCommentCount} #{i18n.comment}</span></p>
                            </h:commandLink>
                        </div>
                    </h:form>
                </div>

            </ui:repeat>

        </div>
    </ui:define>
</ui:composition>
