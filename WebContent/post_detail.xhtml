<ui:composition template="template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:cust="http://java.sun.com/jsf/composite/comp"
        >
    <ui:define name="content">
        <!-- ***** POST ***** -->

        <div class="row posts">
            <h:form>
                <div class="voteContainer">
                    <h:commandLink action="#{postBean.post.voteUp}">
                        <f:ajax event="action" render="rating"/>

                        <div class="voteButton up"><span>upvote</span></div>
                    </h:commandLink>

                    <div class="postScore text-center"><span><h:outputText id="rating" value="#{postBean.post.rating}"/></span>
                    </div>
                    <h:commandLink action="#{postBean.post.voteDown}">
                        <f:ajax event="action" render="rating"/>

                        <div class="voteButton down"><span>downvote</span></div>
                    </h:commandLink>
                </div>
                <div class="postContainer">
                    <h2>#{postBean.post.title}</h2>

                    <p class="postUrl">
                        <a href="#{postBean.post.url}">#{postBean.post.url}</a>
                    </p>

                    <div class="postInfo">
                        <span class="postTime">#{postBean.post.durationSinceCreated.value} #{postBean.post.durationSinceCreated.unit} #{i18n.ago} </span>
                        #{i18n.by} <span class="postUser">#{postBean.post.user.username}</span>
                    </div>
                    <p class="comments">
                        <span class="glyphicon glyphicon-comment"/> <span><h:outputText id="commentCount"
                                                                                        value="#{postBean.post.deepCommentCount}"/> #{i18n.comment}</span>
                    </p>
                </div>
            </h:form>
        </div>


        <!-- ***** ADD COMMENT ***** -->
        <div class="row addCommentContainer">
            <h:form>
                <div class="col-md-12">
                    <h2>#{postBean.post.deepCommentCount} #{i18n.comment}</h2>
                    <div class="row">
                        <div class="col-md-1">
                            <span class="glyphicon glyphicon-comment commentIconBig"/>
                        </div>
                        <div class="col-md-6">
                            <h:inputTextarea id="commentInput" value="#{commentBean.commentText}"
                                             required="true"
                                             styleClass="commentTextarea form-control"/>
                            <h:commandButton value="#{i18n.postComment}"
                                             actionListener="#{commentBean.addComment(postBean)}"
                                             styleClass="btn btn-primary postCommentButton"/>
                        </div>
                    </div>
                </div>
            </h:form>
        </div>


        <!-- ***** COMMENT LIST ***** -->
        <div class="row commentsList">
            <cust:comment commentList="#{postBean.post.commentsFlat}"/>
        </div>

    </ui:define>
</ui:composition>